(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{FU3J:function(e,r,t){"use strict";t.r(r),t.d(r,"AuthModule",(function(){return F}));var s=t("ofXK"),o=t("tyNb"),i=t("fXoL"),a=t("EXja");let n=(()=>{class e{constructor(e,r){this.router=e,this.authService=r}canActivate(e,r){return console.log(this.authService.isLoggedIn),this.authService.isLoggedIn&&this.router.navigate(["/home"]),!this.authService.isLoggedIn}}return e.\u0275fac=function(r){return new(r||e)(i.Xb(o.c),i.Xb(a.a))},e.\u0275prov=i.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var l=t("jhN1"),c=t("3Pt+");function d(e){return r=>new RegExp(e).test(r.value)?null:{pattern:!0}}var b=t("nYR2"),u=t("cFhm");function h(e){const r=[`\\S{${e.minLength},}`];return e.requireDigit&&r.unshift("(?=.*\\d)"),e.requireLowercase&&r.unshift("(?=.*[a-z])"),e.requireUppercase&&r.unshift("(?=.*[A-Z])"),e.requireNonAlphanumeric&&r.unshift("(?=.+[\\W_])"),new RegExp(`^${r.reduce((e,r)=>e.concat(r))}$`,"g")}var m=t("FiTm");function p(e,r){if(1&e&&(i.Pb(0,"li"),i.Ec(1),i.Ob()),2&e){const e=r.$implicit;i.xb(1),i.Gc(" ",e," ")}}function g(e,r){if(1&e&&(i.Pb(0,"ul"),i.Cc(1,p,2,1,"li",35),i.Ob()),2&e){const e=i.ec(2);i.xb(1),i.kc("ngForOf",e.alertModel.messages)}}function f(e,r){if(1&e){const e=i.Qb();i.Pb(0,"div",31),i.Pb(1,"div"),i.Ec(2),i.Ob(),i.Cc(3,g,2,1,"ul",32),i.Pb(4,"button",33),i.ac("click",(function(){return i.uc(e),i.ec().closeAlert()})),i.Pb(5,"span",34),i.Ec(6,"\xd7"),i.Ob(),i.Ob(),i.Ob()}if(2&e){const e=i.ec();i.kc("ngClass",e.alertModel.class),i.xb(2),i.Fc(e.alertModel.text),i.xb(1),i.kc("ngIf",e.alertModel.show&&e.alertModel.messages.length)}}function w(e,r){if(1&e&&(i.Pb(0,"span",36),i.Ec(1),i.Ob()),2&e){const e=r.$implicit;i.xb(1),i.Fc(e.errorMessage)}}function P(e,r){if(1&e&&(i.Pb(0,"span",36),i.Ec(1),i.Ob()),2&e){const e=r.$implicit;i.xb(1),i.Fc(e.errorMessage)}}function x(e,r){if(1&e&&(i.Pb(0,"span",36),i.Ec(1),i.Ob()),2&e){const e=r.$implicit;i.xb(1),i.Fc(e.errorMessage)}}function v(e,r){if(1&e&&(i.Pb(0,"span",36),i.Ec(1),i.Ob()),2&e){const e=r.$implicit;i.xb(1),i.Fc(e.errorMessage)}}let O=(()=>{class e{constructor(e,r){this.authService=e,this.loaderService=r,this.defaultErrorText="B\u0142\u0105d w polu ",this.isSubmited=!1,this.alertModel={class:"alert-success",text:"",show:!1,messages:[]},this.loader=!1,this.showFirstPassword=!1,this.showSecondPassword=!1,this.errorMessages={loginpattern:(...e)=>e[0]+" mo\u017ce sk\u0142ada\u0107 si\u0119 wy\u0142\u0105cznie z podstawowych liter, cyfr oraz znak\xf3w specjalnych [ . - _ ]. Znak specjalny nie mo\u017ce by\u0107 znakiem ko\u0144cz\u0105cym/rozpoczynaj\u0105cym login.",required:(...e)=>"Pole jest wymagane",email:(...e)=>`Pole ${e[0]} posiada z\u0142y format`,mustMatch:(...e)=>`Pole ${e[0]} musi mie\u0107 tak\u0105 sam\u0105 warto\u015b\u0107 co has\u0142o`,minlength:(...e)=>`Pole ${e[0]} musi zawiera\u0107 minimum 6 znak\xf3w`,pattern:(...e)=>this.passwordErrorMessage},this.texts={password:"Has\u0142o",login:"Login",email:"Adres e\u2011mail",confirmPassword:"Potwierd\u017a has\u0142o",submit:"Za\u0142\xf3\u017c konto",name:"Nazwa",header:"Rejestracja u\u017cytkownika",registrationError:"Nie uda\u0142o si\u0119 utworzy\u0107 konta",registrationSuccess:"Konto za\u0142o\u017cone. Mo\u017cesz si\u0119 zalogowa\u0107.",formErrorMessage:"Formularz zawiera b\u0142\u0119dy",fieldRequiredLabel:"Pole wymagane"},this._passwordRequirements={minLength:8,requireDigit:!0,requireLowercase:!0,requireNonAlphanumeric:!0,requireUppercase:!0},this.toggleShowFirstPassword=()=>{this.showFirstPassword=!this.showFirstPassword},this.toggleShowSecondPassword=()=>{this.showSecondPassword=!this.showSecondPassword},this.validationSuccess=e=>{const r={password:e.password,email:e.email,username:e.login};this.loader=!0,this.authService.register(r).pipe(Object(b.a)(()=>this.loader=!1)).subscribe(e=>{1==e.isCreated?this.onSubmitSuccess(e):this.onSubmitFailure(e.errorMessage)},e=>this.onSubmitFailure(e))},this.validationFailure=()=>{u.a.scrollToTop(),this.showAlert(this.texts.formErrorMessage,"alert-danger")},this.onSubmitSuccess=e=>{this.form.reset(),u.a.scrollToTop(),this.showAlert(this.texts.registrationSuccess,"alert-success")},this.onSubmitFailure=e=>{const r=[];Object.keys(e.error.errors).forEach(t=>r.push(...e.error.errors[t])),this.showAlert(this.texts.registrationError,"alert-danger",r),u.a.scrollToTop()},this.showAlert=(e,r,t=[])=>{this.alertModel.class=r,this.alertModel.text=e,this.alertModel.messages=t,this.alertModel.show=!0},this.closeAlert=()=>{this.alertModel.show=!1},this.onSubmit=()=>{this.isSubmited=!0,this.isValid?this.validationSuccess(this.form.value):this.validationFailure()},this.hasError=e=>{const r=this.form.controls[e];return r.touched&&r.invalid&&this.isSubmited},this.collectErrors=e=>{const r=this.form.get(e);return this.isSubmited&&r.touched&&r.errors?Object.keys(r.errors).slice(0,1).map(r=>({fieldName:e,errorMessage:this.getErrorMessage(this.errorMessages[`${e}${r}`]||this.errorMessages[r],this.getDisplayName(e))})):[]},this.getErrorMessage=(e,r)=>e?e(r):`${this.defaultErrorText}${r}`,this.getDisplayName=e=>this.displayNames[e]?this.displayNames[e]:e}ngOnInit(){this.initForm(),this.displayNames=this.texts}initForm(){let e={};e.login=new c.b("",[c.r.required,d(/^(?=.*[A-Za-z0-9]$)[A-Za-z][A-Za-z\d.\-_]{0,19}$/)]),e.email=new c.b("",[c.r.required,c.r.email]),e.password=new c.b("",[c.r.required,d(h(this._passwordRequirements))]),e.confirmPassword=new c.b(""),this.form=new c.d(e,[e=>{const r=e.controls.password,t=e.controls.confirmPassword;if(!t.errors||t.errors.mustMatch)return t.setErrors(null),r.value!==t.value&&t.setErrors({mustMatch:!0}),null}])}get passwordErrorMessage(){const e=[];return this._passwordRequirements.requireLowercase&&e.push(", ma\u0142\u0105 liter\u0119"),this._passwordRequirements.requireUppercase&&e.push(", wielk\u0105 liter\u0119"),this._passwordRequirements.requireDigit&&e.push(", liczb\u0119"),this._passwordRequirements.requireNonAlphanumeric&&e.push(", znak niealfanumeryczny"),`Has\u0142o powinno zawiera\u0107 min. ${this._passwordRequirements.minLength} znak\xf3w`.concat(...e)}get isValid(){return this.form.markAllAsTouched(),this.form.valid}get errors(){const e=[];return Object.keys(this.form.controls).forEach(r=>{e.push(...this.collectErrors(r))}),e}}return e.\u0275fac=function(r){return new(r||e)(i.Kb(a.a),i.Kb(m.a))},e.\u0275cmp=i.Eb({type:e,selectors:[["app-users-registration"]],decls:51,vars:22,consts:[["class","alert alert-dismissible mt-3","role","alert",3,"ngClass",4,"ngIf"],[1,"py-5"],[1,"container"],[1,"row","d-flex","justify-content-center","align-items-center"],[1,"col","col-xl-10"],[1,"card","shadow-card","swing-in-top-fwd",2,"border-radius","1rem"],[1,"row","g-0"],[1,"col-md-6","col-lg-5","d-none","d-md-block"],["src","../../../../assets/auth-register.jpg","alt","login form",1,"img-fluid",2,"border-radius","1rem 0 0 1rem","height","100%"],[1,"col-md-6","col-lg-7","d-flex","align-items-center","slide-in-blurred-top"],[1,"card-body","p-4","p-lg-5","text-black"],[1,"d-flex","align-items-center","mb-3","pb-1"],[1,"fas","fa-cubes","fa-2x","me-3",2,"color","#ff6219"],[1,"h1","fw-bold","mb-0"],[1,"fw-normal","mb-3","pb-2",2,"letter-spacing","1px"],[1,"row","mt-3",2,"max-width","100%",3,"formGroup","ngSubmit"],[1,"form-outline","mb-3"],["id","login","type","text","formControlName","login","aria-required","true","autocomplete","username",1,"form-control","form-control-portal",3,"placeholder"],["for","login"],["class","red-text",4,"ngFor","ngForOf"],["id","email","type","text","formControlName","email","aria-required","true","autocomplete","email",1,"form-control","form-control-portal",3,"placeholder"],["for","email"],["id","password","type","password","formControlName","password","aria-required","true","autocomplete","current-password",1,"form-control","form-control-portal",3,"placeholder"],["for","password"],[1,"required","form-label"],["id","confirmPassword","type","password","formControlName","confirmPassword","aria-required","true","autocomplete","current-password",1,"form-control","form-control-portal",3,"placeholder"],["for","confirmPassword"],[1,"pt-1","mb-3"],["type","submit",1,"btn","btn-dark","btn-lg","btn-block"],[2,"color","#393f81"],["routerLink","/auth/login",2,"color","#393f81"],["role","alert",1,"alert","alert-dismissible","mt-3",3,"ngClass"],[4,"ngIf"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[4,"ngFor","ngForOf"],[1,"red-text"]],template:function(e,r){1&e&&(i.Cc(0,f,7,3,"div",0),i.Pb(1,"section",1),i.Pb(2,"div",2),i.Pb(3,"div",3),i.Pb(4,"div",4),i.Pb(5,"div",5),i.Pb(6,"div",6),i.Pb(7,"div",7),i.Lb(8,"img",8),i.Ob(),i.Pb(9,"div",9),i.Pb(10,"div",10),i.Pb(11,"div",11),i.Lb(12,"i",12),i.Pb(13,"span",13),i.Ec(14,"Przepisy kulinarne"),i.Ob(),i.Ob(),i.Pb(15,"h5",14),i.Ec(16," Za\u0142\xf3\u017c konto "),i.Ob(),i.Pb(17,"form",15),i.ac("ngSubmit",(function(){return r.onSubmit()})),i.Pb(18,"div",16),i.Lb(19,"input",17),i.Pb(20,"label",18),i.Ec(21),i.Ob(),i.Ec(22," \xa0 "),i.Cc(23,w,2,1,"span",19),i.Ob(),i.Pb(24,"div",16),i.Lb(25,"input",20),i.Pb(26,"label",21),i.Ec(27),i.Ob(),i.Ec(28," \xa0 "),i.Cc(29,P,2,1,"span",19),i.Ob(),i.Pb(30,"div",16),i.Lb(31,"input",22),i.Pb(32,"label",23),i.Ec(33),i.Lb(34,"span",24),i.Ob(),i.Ec(35," \xa0 "),i.Cc(36,x,2,1,"span",19),i.Ob(),i.Pb(37,"div",16),i.Lb(38,"input",25),i.Pb(39,"label",26),i.Ec(40),i.Lb(41,"span",24),i.Ob(),i.Ec(42," \xa0 "),i.Cc(43,v,2,1,"span",19),i.Ob(),i.Pb(44,"div",27),i.Pb(45,"button",28),i.Ec(46," Zarejestruj "),i.Ob(),i.Ob(),i.Ob(),i.Pb(47,"p",29),i.Ec(48," Posiadasz konto? "),i.Pb(49,"a",30),i.Ec(50,"Zaloguj si\u0119!"),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob()),2&e&&(i.kc("ngIf",r.alertModel.show),i.xb(17),i.kc("formGroup",r.form),i.xb(2),i.Cb("error-portal",r.hasError("login")),i.kc("placeholder",r.texts.login),i.xb(2),i.Gc(" ",r.texts.login," "),i.xb(2),i.kc("ngForOf",r.collectErrors("login")),i.xb(2),i.Cb("error-portal",r.hasError("email")),i.kc("placeholder",r.texts.email),i.xb(2),i.Gc(" ",r.texts.email," "),i.xb(2),i.kc("ngForOf",r.collectErrors("email")),i.xb(2),i.Cb("error-portal",r.hasError("password")),i.kc("placeholder",r.texts.password),i.xb(2),i.Gc(" ",r.texts.password," "),i.xb(3),i.kc("ngForOf",r.collectErrors("password")),i.xb(2),i.Cb("error-portal",r.hasError("confirmPassword")),i.kc("placeholder",r.texts.confirmPassword),i.xb(2),i.Gc(" ",r.texts.confirmPassword," "),i.xb(3),i.kc("ngForOf",r.collectErrors("confirmPassword")))},directives:[s.m,c.t,c.k,c.e,c.a,c.j,c.c,s.l,o.d,s.k],styles:[""]}),e})();function E(e,r){if(1&e&&(i.Pb(0,"div",27),i.Ec(1),i.Ob()),2&e){const e=i.ec();i.kc("ngClass",e.alertModel.class),i.xb(1),i.Gc(" ",e.alertModel.text,"\n")}}function k(e,r){if(1&e&&(i.Pb(0,"span",28),i.Ec(1),i.Ob()),2&e){const e=r.$implicit;i.xb(1),i.Fc(e.errorMessage)}}function y(e,r){if(1&e&&(i.Pb(0,"span",28),i.Ec(1),i.Ob()),2&e){const e=r.$implicit;i.xb(1),i.Fc(e.errorMessage)}}const M=[{path:"register",component:(()=>{class e{constructor(e){this.metaService=e,this.header="Za\u0142\xf3\u017c swoje konto"}ngOnInit(){this.setMetaDescripition(this.header)}setMetaDescripition(e){e&&this.metaService.updateTag({name:"description",content:e})}}return e.\u0275fac=function(r){return new(r||e)(i.Kb(l.c))},e.\u0275cmp=i.Eb({type:e,selectors:[["app-register"]],decls:1,vars:0,template:function(e,r){1&e&&i.Lb(0,"app-users-registration")},directives:[O],styles:[""]}),e})(),data:{title:"Rejestracja",breadcrumbs:"Rejestracja"},canActivate:[n]},{path:"login",component:(()=>{class e{constructor(e,r,t,s){this.authService=e,this.loaderService=r,this.router=t,this.metaService=s,this.alertModel={class:"alert-success",text:"",show:!1},this.errorMessages={required:(...e)=>"Pole jest wymagane"},this.redirectUrl="/home",this.texts={metaDescription:"Zaloguj si\u0119 do Przepisy Kulinarne, aby uzyskiwa\u0107 informacje na temat nowych przepis\xf3w.",password:"Has\u0142o",username:"Login",submit:"Zaloguj",header:"Logowanie",loginFailureMessage:"Niepoprawny login lub has\u0142o",loginSuccessMessage:"U\u017cytkownik zalogowany poprawnie",invalidFormMessage:"Formularz zawiera b\u0142\u0119dy",createAccountLabel:"Za\u0142\xf3\u017c konto",forgotPassword:"Zapomnia\u0142em has\u0142a"},this.showAlert=(e,r,t)=>{this.alertModel.class=r,this.alertModel.text=e,this.alertModel.show=!0,setTimeout(()=>this.alertModel.show=!1,t)},this.validationSuccess=e=>{this.loaderService.show(),this.authService.login(e).pipe(Object(b.a)(()=>{this.loaderService.hide()})).subscribe(e=>{this.router.navigate([this.redirectUrl]),window.location.reload()},e=>{this.showAlert(this.texts.loginFailureMessage,"alert-danger",1e4)})},this.validationFailure=()=>{this.showAlert(this.texts.invalidFormMessage,"alert-danger",5e3)},this.initForm=()=>{let e={};e.username=new c.b("",c.r.required),e.password=new c.b("",c.r.required),this.form=new c.d(e)},this.redirectToRegister=()=>{this.router.navigate(["auth/register"])},this.defaultErrorText="B\u0142\u0105d w polu ",this.isSubmited=!1,this.onSubmit=()=>{this.isSubmited=!0,this.isValid?this.validationSuccess(this.form.value):this.validationFailure()},this.hasError=e=>{const r=this.form.controls[e];return r.touched&&r.invalid&&this.isSubmited},this.collectErrors=e=>{const r=this.form.get(e);return this.isSubmited&&r.touched&&r.errors?Object.keys(r.errors).slice(0,1).map(r=>({fieldName:e,errorMessage:this.getErrorMessage(this.errorMessages[`${e}${r}`]||this.errorMessages[r],this.getDisplayName(e))})):[]},this.getErrorMessage=(e,r)=>e?e(r):`${this.defaultErrorText}${r}`,this.getDisplayName=e=>this.displayNames[e]?this.displayNames[e]:e}setMetaDescripition(e){e&&this.metaService.updateTag({name:"description",content:e})}ngOnInit(){this.setMetaDescripition(this.texts.metaDescription),this.initForm(),this.displayNames=this.texts}get isValid(){return this.form.markAllAsTouched(),this.form.valid}get errors(){const e=[];return Object.keys(this.form.controls).forEach(r=>{e.push(...this.collectErrors(r))}),e}}return e.\u0275fac=function(r){return new(r||e)(i.Kb(a.a),i.Kb(m.a),i.Kb(o.c),i.Kb(l.c))},e.\u0275cmp=i.Eb({type:e,selectors:[["app-login"]],decls:38,vars:12,consts:[["class","alert mt-3","role","alert",3,"ngClass",4,"ngIf"],[1,"py-5"],[1,"container","h-100"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col","col-xl-10"],[1,"card","shadow-card","swing-in-top-fwd",2,"border-radius","1rem"],[1,"row","g-0"],[1,"col-md-6","col-lg-5","d-none","d-md-block"],["src","../../../../assets/auth-login.jpg","alt","login form",1,"img-fluid",2,"border-radius","1rem 0 0 1rem","height","100%"],[1,"col-md-6","col-lg-7","d-flex","align-items-center","slide-in-blurred-top"],[1,"card-body","p-4","p-lg-5","text-black"],[1,"d-flex","align-items-center","mb-3","pb-1"],[1,"fas","fa-cubes","fa-2x","me-3",2,"color","#ff6219"],[1,"h1","fw-bold","mb-0"],[1,"fw-normal","mb-3","pb-3",2,"letter-spacing","1px"],[1,"row","mt-3",2,"max-width","100%",3,"formGroup","ngSubmit"],[1,"form-outline","mb-4"],["id","username","type","text","formControlName","username","aria-required","true","autocomplete","username",1,"form-control",3,"placeholder"],["for","username"],["class","red-text",4,"ngFor","ngForOf"],["id","password","type","password","formControlName","password","aria-required","true","autocomplete","current-password",1,"form-control","form-control-portal",3,"placeholder"],["for","password"],[1,"required","form-label"],[1,"pt-1","mb-4"],["type","submit",1,"btn","btn-dark","btn-lg","btn-block"],[1,"pb-lg-2",2,"color","#393f81"],["routerLink","/auth/register",2,"color","#393f81"],["role","alert",1,"alert","mt-3",3,"ngClass"],[1,"red-text"]],template:function(e,r){1&e&&(i.Cc(0,E,2,2,"div",0),i.Pb(1,"section",1),i.Pb(2,"div",2),i.Pb(3,"div",3),i.Pb(4,"div",4),i.Pb(5,"div",5),i.Pb(6,"div",6),i.Pb(7,"div",7),i.Lb(8,"img",8),i.Ob(),i.Pb(9,"div",9),i.Pb(10,"div",10),i.Pb(11,"div",11),i.Lb(12,"i",12),i.Pb(13,"span",13),i.Ec(14,"Przepisy kulinarne"),i.Ob(),i.Ob(),i.Pb(15,"h5",14),i.Ec(16," Zaloguj si\u0119 do swojego konta "),i.Ob(),i.Pb(17,"form",15),i.ac("ngSubmit",(function(){return r.onSubmit()})),i.Pb(18,"div",16),i.Lb(19,"input",17),i.Pb(20,"label",18),i.Ec(21),i.Ob(),i.Ec(22," \xa0 "),i.Cc(23,k,2,1,"span",19),i.Ob(),i.Pb(24,"div",16),i.Lb(25,"input",20),i.Pb(26,"label",21),i.Ec(27),i.Lb(28,"span",22),i.Ob(),i.Ec(29," \xa0 "),i.Cc(30,y,2,1,"span",19),i.Ob(),i.Pb(31,"div",23),i.Pb(32,"button",24),i.Ec(33," Zaloguj "),i.Ob(),i.Ob(),i.Ob(),i.Pb(34,"p",25),i.Ec(35," Nie posiadasz konta? "),i.Pb(36,"a",26),i.Ec(37,"Zarejestruj si\u0119!"),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob()),2&e&&(i.kc("ngIf",r.alertModel.show),i.xb(17),i.kc("formGroup",r.form),i.xb(2),i.Cb("error-portal",r.hasError("username")),i.kc("placeholder",r.texts.username),i.xb(2),i.Gc(" ",r.texts.username," "),i.xb(2),i.kc("ngForOf",r.collectErrors("username")),i.xb(2),i.Cb("error-portal",r.hasError("password")),i.kc("placeholder",r.texts.password),i.xb(2),i.Gc(" ",r.texts.password," "),i.xb(3),i.kc("ngForOf",r.collectErrors("password")))},directives:[s.m,c.t,c.k,c.e,c.a,c.j,c.c,s.l,o.d,s.k],styles:[""]}),e})(),data:{title:"Logowanie",breadcrumbs:"Logowanie"},canActivate:[n]},{path:"",redirectTo:"login"}];let S=(()=>{class e{}return e.\u0275mod=i.Ib({type:e}),e.\u0275inj=i.Hb({factory:function(r){return new(r||e)},imports:[[o.e.forChild(M)],o.e]}),e})(),F=(()=>{class e{}return e.\u0275mod=i.Ib({type:e}),e.\u0275inj=i.Hb({factory:function(r){return new(r||e)},imports:[[s.b,S,c.f,c.p],o.e]}),e})()}}]);